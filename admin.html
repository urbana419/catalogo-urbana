<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Urbana VisiÃ³n</title>
    <style>
        body { font-family: Arial; background: #1f2937; color: white; padding: 20px; }
        .container { max-width: 400px; margin: 0 auto; }
        .card { background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin-bottom: 20px; }
        .photo-area { width: 150px; height: 150px; border: 2px dashed #60a5fa; border-radius: 10px; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; cursor: pointer; background-size: cover; }
        .photo-area.has-photo { border-style: solid; }
        input, select { width: 100%; padding: 10px; margin: 10px 0; border: none; border-radius: 5px; background: rgba(255,255,255,0.1); color: white; }
        input::placeholder { color: #ccc; }
        button { width: 100%; padding: 12px; margin: 10px 0; border: none; border-radius: 5px; font-weight: bold; cursor: pointer; }
        .btn-save { background: #10b981; color: white; }
        .btn-copy { background: #6b7280; color: white; margin: 5px 0; }
        .result { background: rgba(59, 130, 246, 0.1); padding: 15px; border-radius: 10px; margin-top: 20px; display: none; }
        .url-box { background: rgba(255,255,255,0.1); padding: 10px; border-radius: 5px; font-size: 12px; word-break: break-all; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="card">
            <h1>Admin - Urbana VisiÃ³n</h1>
            
            <div class="photo-area" id="photo" onclick="document.getElementById('file').click()">
                <span>ğŸ“· Tomar Foto</span>
            </div>
            <input type="file" id="file" accept="image/*" capture="environment" style="display:none">
            
            <input type="text" id="codigo" placeholder="CÃ³digo (ej: H001)" maxlength="4">
            
            <select id="categoria">
                <option value="">CategorÃ­a</option>
                <option value="hombre">ğŸ‘¨ Hombres</option>
                <option value="mujer">ğŸ‘© Mujeres</option>
                <option value="deportivo">ğŸƒ Deportivos</option>
                <option value="niÃ±os">ğŸ‘¶ NiÃ±os</option>
            </select>
            
            <input type="text" id="precio" placeholder="Precio (ej: $2500)">
            <input type="text" id="nombre" placeholder="Nombre (opcional)">
            
            <button class="btn-save" onclick="guardar()">ğŸ’¾ Guardar</button>
            
            <div id="result" class="result">
                <strong>Enlace:</strong>
                <div id="enlace" class="url-box"></div>
                <button class="btn-copy" onclick="copiarEnlace()">ğŸ“‹ Copiar Enlace</button>
                <button class="btn-copy" onclick="copiarMensaje()">ğŸ“‹ Copiar Mensaje</button>
            </div>
        </div>
    </div>

    <script>
        let foto = null;
        let enlace = '';
        let mensaje = '';
        
        document.getElementById('file').onchange = function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    foto = e.target.result;
                    const photoArea = document.getElementById('photo');
                    photoArea.style.backgroundImage = `url(${foto})`;
                    photoArea.classList.add('has-photo');
                    photoArea.innerHTML = '<span style="background:rgba(0,0,0,0.7);padding:5px;border-radius:5px;">âœ… Lista</span>';
                };
                reader.readAsDataURL(file);
            }
        };
        
        function guardar() {
            const codigo = document.getElementById('codigo').value.trim().toUpperCase();
            const categoria = document.getElementById('categoria').value;
            const precio = document.getElementById('precio').value.trim();
            const nombre = document.getElementById('nombre').value.trim();
            
            if (!foto) { alert('Toma una foto'); return; }
            if (!codigo) { alert('CÃ³digo requerido'); return; }
            if (!categoria) { alert('CategorÃ­a requerida'); return; }
            if (!precio) { alert('Precio requerido'); return; }
            
            // Guardar en localStorage
            const monturas = JSON.parse(localStorage.getItem('monturas') || '{}');
            monturas[codigo] = {
                codigo: codigo,
                categoria: categoria,
                precio: precio,
                nombre: nombre || 'Sin nombre',
                foto: foto
            };
            localStorage.setItem('monturas', JSON.stringify(monturas));
            
            // Generar enlace
            enlace = window.location.href.replace('admin.html', 'index.html') + '?codigo=' + codigo;
            
            // Generar mensaje
            const cats = {'hombre': 'ğŸ‘¨ Hombres', 'mujer': 'ğŸ‘© Mujeres', 'deportivo': 'ğŸƒ Deportivos', 'niÃ±os': 'ğŸ‘¶ NiÃ±os'};
            mensaje = `ğŸ¥½ NUEVA MONTURA - Urbana VisiÃ³n

ğŸ“‹ CÃ³digo: ${codigo}
ğŸ‘¤ CategorÃ­a: ${cats[categoria]}
ğŸ’° Precio: ${precio}
${nombre ? `ğŸ“ Nombre: ${nombre}` : ''}

ğŸ“± VER FOTO:
${enlace}

ğŸ¥ Urbana VisiÃ³n
ğŸ“± 809-713-5307
ğŸ 6 meses garantÃ­a`;
            
            // Mostrar resultado
            document.getElementById('enlace').textContent = enlace;
            document.getElementById('result').style.display = 'block';
            
            alert('âœ… Guardado!');
            
            // Limpiar
            document.getElementById('codigo').value = '';
            document.getElementById('categoria').value = '';
            document.getElementById('precio').value = '';
            document.getElementById('nombre').value = '';
            foto = null;
            const photoArea = document.getElementById('photo');
            photoArea.style.backgroundImage = 'none';
            photoArea.classList.remove('has-photo');
            photoArea.innerHTML = '<span>ğŸ“· Tomar Foto</span>';
        }
        
        function copiarEnlace() {
            navigator.clipboard.writeText(enlace).then(() => alert('ğŸ“‹ Enlace copiado'));
        }
        
        function copiarMensaje() {
            navigator.clipboard.writeText(mensaje).then(() => alert('ğŸ“‹ Mensaje copiado'));
        }
    </script>
</body>
</html>
