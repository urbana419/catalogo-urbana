<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo - Urbana Visi√≥n</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #1f2937 0%, #374151 100%); min-height: 100vh; padding: 10px; color: white; }
        .container { max-width: 400px; margin: 0 auto; }
        .header { background: rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; text-align: center; margin-bottom: 20px; }
        .logo { width: 50px; height: 50px; background: linear-gradient(135deg, #3b82f6, #f97316); border-radius: 50%; margin: 0 auto 10px; }
        h1 { font-size: 20px; margin-bottom: 5px; }
        .subtitle { font-size: 12px; opacity: 0.8; }
        .card { background: rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; margin-bottom: 20px; }
        .montura-image { width: 100%; max-width: 280px; height: 280px; border-radius: 15px; object-fit: cover; margin: 0 auto 20px; display: block; border: 2px solid rgba(255,255,255,0.2); }
        .montura-info { text-align: center; }
        .montura-codigo { font-size: 24px; font-weight: bold; margin-bottom: 10px; color: #60a5fa; }
        .montura-categoria { font-size: 16px; margin-bottom: 10px; color: #d1d5db; }
        .montura-precio { font-size: 28px; font-weight: bold; color: #10b981; margin-bottom: 10px; }
        .montura-nombre { font-size: 14px; color: #9ca3af; margin-bottom: 20px; }
        .contacto-info { background: rgba(16, 185, 129, 0.1); border: 1px solid #10b981; border-radius: 10px; padding: 15px; text-align: center; margin-top: 20px; }
        .contacto-info h3 { color: #10b981; margin-bottom: 10px; font-size: 16px; }
        .contacto-item { display: flex; align-items: center; justify-content: center; margin-bottom: 8px; font-size: 14px; }
        .whatsapp-btn { background: #25d366; color: white; padding: 12px 20px; border: none; border-radius: 10px; font-size: 14px; font-weight: bold; cursor: pointer; margin-top: 15px; width: 100%; text-decoration: none; display: inline-block; text-align: center; }
        .catalogo-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .catalogo-item { background: rgba(255,255,255,0.1); border-radius: 10px; padding: 15px; text-align: center; cursor: pointer; transition: all 0.3s; border: 1px solid rgba(255,255,255,0.2); }
        .catalogo-item:hover { background: rgba(255,255,255,0.2); transform: translateY(-3px); }
        .catalogo-imagen { width: 100%; height: 120px; border-radius: 8px; object-fit: cover; margin-bottom: 10px; border: 1px solid rgba(255,255,255,0.2); }
        .catalogo-codigo { font-weight: bold; font-size: 14px; margin-bottom: 5px; color: #60a5fa; }
        .catalogo-precio { color: #10b981; font-weight: bold; font-size: 13px; margin-bottom: 3px; }
        .catalogo-categoria { font-size: 11px; color: #9ca3af; }
        .filtros { display: flex; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
        .filtro-btn { background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: white; padding: 8px 15px; border-radius: 20px; font-size: 12px; cursor: pointer; }
        .filtro-btn.active { background: #3b82f6; border-color: #3b82f6; }
        .no-monturas { text-align: center; color: #6b7280; padding: 40px 20px; font-size: 14px; }
        .back-btn { background: #6b7280; color: white; padding: 10px 20px; border: none; border-radius: 8px; font-size: 12px; cursor: pointer; margin-bottom: 15px; text-decoration: none; display: inline-block; }
        .admin-btn { position: fixed; bottom: 20px; right: 20px; background: #7c3aed; color: white; padding: 12px; border: none; border-radius: 50%; font-size: 18px; cursor: pointer; width: 50px; height: 50px; text-decoration: none; }
        .error-message { background: rgba(239, 68, 68, 0.1); border: 1px solid #ef4444; color: #ef4444; padding: 15px; border-radius: 8px; text-align: center; margin: 20px 0; font-size: 14px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo"></div>
            <h1>Urbana Visi√≥n</h1>
            <p class="subtitle">Cat√°logo de Monturas</p>
        </div>
        
        <div id="contenido">
            <div style="text-align: center; padding: 40px; color: #9ca3af;">üîÑ Cargando cat√°logo...</div>
        </div>
    </div>
    
    <a href="admin.html" class="admin-btn">‚öôÔ∏è</a>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const urlParams = new URLSearchParams(window.location.search);
            const codigoEspecifico = urlParams.get('codigo');
            
            if (codigoEspecifico) {
                mostrarMonturaEspecifica(codigoEspecifico);
            } else {
                mostrarCatalogoCompleto();
            }
        });
        
        function mostrarMonturaEspecifica(codigo) {
            const monturas = JSON.parse(localStorage.getItem('monturas') || '{}');
            const montura = monturas[codigo.toUpperCase()];
            
            const contenido = document.getElementById('contenido');
            
            if (!montura) {
                contenido.innerHTML = `
                    <div class="card">
                        <div class="error-message">
                            üòî<br>
                            Montura no encontrada<br>
                            <small>C√≥digo: ${codigo}</small>
                        </div>
                        <a href="index.html" class="back-btn">üîô Ver Cat√°logo Completo</a>
                    </div>
                `;
                return;
            }
            
            const nombreCategoria = {
                'hombre': 'üë® Hombres',
                'mujer': 'üë© Mujeres', 
                'deportivo': 'üèÉ Deportivos',
                'ni√±os': 'üë∂ Ni√±os'
            }[montura.categoria] || 'üëì General';
            
            const mensajeWhatsApp = `Hola! Me interesa la montura ${montura.codigo} (${nombreCategoria}) - ${montura.precio}`;
            const urlWhatsApp = `https://wa.me/18097135307?text=${encodeURIComponent(mensajeWhatsApp)}`;
            
            contenido.innerHTML = `
                <a href="index.html" class="back-btn">üîô Ver Cat√°logo Completo</a>
                
                <div class="card">
                    <img src="${montura.foto}" alt="Montura ${montura.codigo}" class="montura-image">
                    
                    <div class="montura-info">
                        <div class="montura-codigo">${montura.codigo}</div>
                        <div class="montura-categoria">${nombreCategoria}</div>
                        <div class="montura-precio">${montura.precio}</div>
                        ${montura.nombre && montura.nombre !== 'Sin nombre' ? `<div class="montura-nombre">${montura.nombre}</div>` : ''}
                        
                        <a href="${urlWhatsApp}" class="whatsapp-btn" target="_blank">
                            üì± Contactar por WhatsApp
                        </a>
                    </div>
                </div>
                
                <div class="contacto-info">
                    <h3>üìû Informaci√≥n de Contacto</h3>
                    <div class="contacto-item">üè• Urbana Visi√≥n</div>
                    <div class="contacto-item">üì± (809) 713-5307</div>
                    <div class="contacto-item">üéÅ 6 meses de garant√≠a</div>
                </div>
            `;
        }
        
        function mostrarCatalogoCompleto() {
            const monturas = JSON.parse(localStorage.getItem('monturas') || '{}');
            const contenido = document.getElementById('contenido');
            
            if (Object.keys(monturas).length === 0) {
                contenido.innerHTML = `
                    <div class="card">
                        <div class="no-monturas">
                            ü•Ω<br>
                            No hay monturas en el cat√°logo a√∫n
                        </div>
                    </div>
                `;
                return;
            }
            
            let html = `
                <div class="filtros">
                    <button class="filtro-btn active" onclick="filtrarCategoria('todas')">üåü Todas</button>
                    <button class="filtro-btn" onclick="filtrarCategoria('hombre')">üë® Hombres</button>
                    <button class="filtro-btn" onclick="filtrarCategoria('mujer')">üë© Mujeres</button>
                    <button class="filtro-btn" onclick="filtrarCategoria('deportivo')">üèÉ Deportivos</button>
                    <button class="filtro-btn" onclick="filtrarCategoria('ni√±os')">üë∂ Ni√±os</button>
                </div>
                
                <div class="catalogo-grid" id="catalogoGrid">
            `;
            
            for (const codigo in monturas) {
                const montura = monturas[codigo];
                if (!montura) continue;
                
                const nombreCategoria = {
                    'hombre': 'üë®',
                    'mujer': 'üë©', 
                    'deportivo': 'üèÉ',
                    'ni√±os': 'üë∂'
                }[montura.categoria] || 'üëì';
                
                html += `
                    <div class="catalogo-item" data-categoria="${montura.categoria}" onclick="verMontura('${codigo}')">
                        <img src="${montura.foto}" alt="Montura ${codigo}" class="catalogo-imagen">
                        <div class="catalogo-codigo">${nombreCategoria} ${codigo}</div>
                        <div class="catalogo-precio">${montura.precio}</div>
                        <div class="catalogo-categoria">${montura.nombre && montura.nombre !== 'Sin nombre' ? montura.nombre : 'Sin nombre'}</div>
                    </div>
                `;
            }
            
            html += `
                </div>
                
                <div class="contacto-info">
                    <h3>üìû Informaci√≥n de Contacto</h3>
                    <div class="contacto-item">üè• Urbana Visi√≥n</div>
                    <div class="contacto-item">üì± (809) 713-5307</div>
                    <div class="contacto-item">üéÅ 6 meses de garant√≠a</div>
                </div>
            `;
            
            contenido.innerHTML = html;
        }
        
        function verMontura(codigo) {
            window.location.href = `?codigo=${codigo}`;
        }
        
        function filtrarCategoria(categoria) {
            const botones = document.querySelectorAll('.filtro-btn');
            botones.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const items = document.querySelectorAll('.catalogo-item');
            items.forEach(item => {
                if (categoria === 'todas' || item.dataset.categoria === categoria) {
                    item.style.display = 'block';
                } else {
                    item.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>
