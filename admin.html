<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Urbana Visi√≥n</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: Arial, sans-serif; background: linear-gradient(135deg, #1f2937 0%, #374151 100%); min-height: 100vh; padding: 10px; color: white; }
        .container { max-width: 400px; margin: 0 auto; }
        .header { background: rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; text-align: center; margin-bottom: 20px; }
        .logo { width: 50px; height: 50px; background: linear-gradient(135deg, #3b82f6, #f97316); border-radius: 50%; margin: 0 auto 10px; }
        h1 { font-size: 20px; margin-bottom: 5px; }
        .subtitle { font-size: 12px; opacity: 0.8; }
        .form-card { background: rgba(255,255,255,0.1); border-radius: 15px; padding: 20px; margin-bottom: 20px; }
        .form-title { font-size: 16px; font-weight: bold; margin-bottom: 15px; text-align: center; color: #60a5fa; }
        .photo-upload { text-align: center; margin-bottom: 15px; }
        .photo-preview { width: 150px; height: 150px; border: 2px dashed #60a5fa; border-radius: 10px; margin: 0 auto 10px; display: flex; align-items: center; justify-content: center; cursor: pointer; background-size: cover; background-position: center; }
        .photo-preview.has-image { border-style: solid; }
        .photo-text { font-size: 12px; color: #60a5fa; text-align: center; }
        .form-group { margin-bottom: 15px; }
        .form-label { display: block; font-size: 12px; color: #d1d5db; margin-bottom: 5px; }
        .form-input { width: 100%; padding: 10px; border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; background: rgba(255,255,255,0.1); color: white; font-size: 14px; }
        .form-input::placeholder { color: rgba(255,255,255,0.5); }
        .form-select { width: 100%; padding: 10px; border: 1px solid rgba(255,255,255,0.2); border-radius: 8px; background: rgba(255,255,255,0.1); color: white; font-size: 14px; }
        .form-select option { background: #374151; color: white; }
        .btn { width: 100%; padding: 12px; border: none; border-radius: 10px; font-size: 14px; font-weight: bold; cursor: pointer; }
        .btn-primary { background: #10b981; color: white; }
        .btn-secondary { background: #6b7280; color: white; margin-top: 10px; }
        .success-message { background: #10b981; color: white; padding: 15px; border-radius: 8px; text-align: center; margin-bottom: 15px; font-size: 14px; display: none; }
        .enlace-result { background: rgba(59, 130, 246, 0.1); border: 1px solid #3b82f6; border-radius: 10px; padding: 15px; margin-top: 15px; display: none; }
        .enlace-result h4 { color: #60a5fa; margin-bottom: 10px; font-size: 14px; }
        .enlace-url { background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; font-size: 12px; margin-bottom: 15px; word-break: break-all; font-family: monospace; }
        .mensaje-plantilla { background: rgba(255,255,255,0.1); padding: 10px; border-radius: 8px; font-size: 12px; margin-bottom: 15px; white-space: pre-wrap; }
        .copy-btn { background: #6b7280; color: white; border: none; padding: 8px 12px; border-radius: 6px; font-size: 11px; cursor: pointer; margin: 5px; width: calc(50% - 5px); }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo"></div>
            <h1>Panel Admin</h1>
            <p class="subtitle">Urbana Visi√≥n</p>
        </div>
        
        <div class="form-card">
            <div class="form-title">üì∑ Subir Nueva Montura</div>
            
            <div id="successMessage" class="success-message">‚úÖ Guardado</div>
            
            <div class="photo-upload">
                <div class="photo-preview" id="photoPreview" onclick="document.getElementById('photoInput').click()">
                    <div class="photo-text">üì∑<br>Foto<br><small>Toca aqu√≠</small></div>
                </div>
                <input type="file" id="photoInput" accept="image/*" capture="environment" style="display: none;">
            </div>
            
            <div class="form-group">
                <label class="form-label">C√≥digo</label>
                <input type="text" class="form-input" id="codigo" placeholder="H001" maxlength="4">
            </div>
            
            <div class="form-group">
                <label class="form-label">Categor√≠a</label>
                <select class="form-select" id="categoria">
                    <option value="">Seleccionar</option>
                    <option value="hombre">üë® Hombres</option>
                    <option value="mujer">üë© Mujeres</option>
                    <option value="deportivo">üèÉ Deportivos</option>
                    <option value="ni√±os">üë∂ Ni√±os</option>
                </select>
            </div>
            
            <div class="form-group">
                <label class="form-label">Precio</label>
                <input type="text" class="form-input" id="precio" placeholder="$2500">
            </div>
            
            <div class="form-group">
                <label class="form-label">Nombre</label>
                <input type="text" class="form-input" id="nombre" placeholder="Opcional">
            </div>
            
            <button class="btn btn-primary" onclick="guardar()">üíæ Guardar</button>
            <button class="btn btn-secondary" onclick="window.location.href='index.html'">üëÅÔ∏è Ver Cat√°logo</button>
            
            <div id="enlaceResult" class="enlace-result">
                <h4>üîó Enlace:</h4>
                <div id="enlaceCatalogo" class="enlace-url"></div>
                <h4>üìã Mensaje:</h4>
                <div id="mensajePlantilla" class="mensaje-plantilla"></div>
                <button class="copy-btn" onclick="copiar()">üìã Copiar</button>
            </div>
        </div>
    </div>

    <script>
        let foto = null;
        
        document.getElementById('photoInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    foto = e.target.result;
                    const preview = document.getElementById('photoPreview');
                    preview.style.backgroundImage = `url(${foto})`;
                    preview.classList.add('has-image');
                    preview.innerHTML = '<div class="photo-text" style="background: rgba(0,0,0,0.7); padding: 5px; border-radius: 5px; color: white;">‚úÖ Lista</div>';
                };
                reader.readAsDataURL(file);
            }
        });
        
        function guardar() {
            const codigo = document.getElementById('codigo').value.trim().toUpperCase();
            const categoria = document.getElementById('categoria').value;
            const precio = document.getElementById('precio').value.trim();
            const nombre = document.getElementById('nombre').value.trim();
            
            if (!foto) { alert('Toma una foto'); return; }
            if (!codigo) { alert('Ingresa c√≥digo'); return; }
            if (!categoria) { alert('Selecciona categor√≠a'); return; }
            if (!precio) { alert('Ingresa precio'); return; }
            
            const monturas = JSON.parse(localStorage.getItem('monturas') || '{}');
            monturas[codigo] = {
                codigo: codigo,
                categoria: categoria,
                precio: precio,
                nombre: nombre || 'Sin nombre',
                foto: foto
            };
            localStorage.setItem('monturas', JSON.stringify(monturas));
            
            const enlace = window.location.origin + window.location.pathname.replace('admin.html', 'index.html') + '?codigo=' + codigo;
            
            const categorias = {
                'hombre': 'üë® Hombres',
                'mujer': 'üë© Mujeres', 
                'deportivo': 'üèÉ Deportivos',
                'ni√±os': 'üë∂ Ni√±os'
            };
            
            const mensaje = `ü•Ω NUEVA MONTURA - Urbana Visi√≥n

üìã C√≥digo: ${codigo}
üë§ Categor√≠a: ${categorias[categoria]}
üí∞ Precio: ${precio}
${nombre ? `üìù Nombre: ${nombre}` : ''}

üì± VER FOTO:
${enlace}

üè• Urbana Visi√≥n
üì± 809-713-5307
üéÅ 6 meses garant√≠a`;
            
            document.getElementById('enlaceCatalogo').textContent = enlace;
            document.getElementById('mensajePlantilla').textContent = mensaje;
            document.getElementById('successMessage').style.display = 'block';
            document.getElementById('enlaceResult').style.display = 'block';
            
            // Limpiar
            document.getElementById('codigo').value = '';
            document.getElementById('categoria').value = '';
            document.getElementById('precio').value = '';
            document.getElementById('nombre').value = '';
            foto = null;
            const preview = document.getElementById('photoPreview');
            preview.style.backgroundImage = 'none';
            preview.classList.remove('has-image');
            preview.innerHTML = '<div class="photo-text">üì∑<br>Foto<br><small>Toca aqu√≠</small></div>';
            
            setTimeout(() => document.getElementById('successMessage').style.display = 'none', 3000);
        }

        function copiar() {
            const mensaje = document.getElementById('mensajePlantilla').textContent;
            navigator.clipboard.writeText(mensaje).then(() => alert('üìã Copiado')).catch(() => alert('Copia manual'));
        }
    </script>
</body>
</html>
